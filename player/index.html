<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>IMDb ‚Üí Vidora Player (Dark Mode)</title>
  <style>
    :root {
      --bg: #0f1115;
      --panel: #181b22;
      --text: #e5e7eb;
      --accent: #00ff9d;
      --border: #272b33;
    }
    body {
      font-family: Inter, Arial, sans-serif;
      background: var(--bg);
      color: var(--text);
      margin: 0;
      padding: 20px;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
      color: var(--accent);
    }
    .box {
      max-width: 700px;
      margin: 0 auto;
      background: var(--panel);
      border-radius: 12px;
      box-shadow: 0 0 20px rgba(0,0,0,0.4);
      padding: 20px;
      border: 1px solid var(--border);
    }
    .row {
      display: flex;
      gap: 10px;
      margin-bottom: 10px;
    }
    input, select, button {
      padding: 10px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: #11141a;
      color: var(--text);
      font-size: 16px;
    }
    input::placeholder { color: #777; }
    select { cursor: pointer; }
    button {
      background: var(--accent);
      color: #000;
      border: none;
      cursor: pointer;
      font-weight: 600;
      transition: opacity 0.2s ease;
    }
    button:hover { opacity: 0.85; }
    iframe {
      width: 100%;
      height: 600px;
      border: none;
      border-radius: 10px;
      margin-top: 20px;
      display: none;
    }
    .result {
      margin-top: 10px;
      background: #11141a;
      border-radius: 10px;
      padding: 12px;
      border: 1px solid var(--border);
    }
    .error { color: #ff5555; }
    a { color: var(--accent); text-decoration: none; }
    .tv-controls {
      display: none;
      margin-top: 10px;
      gap: 10px;
      align-items: center;
    }
  </style>
</head>
<body>
  <h1>IMDb ‚Üí Vidora Player</h1>
  <div class="box">
    <div class="row">
      <input id="searchInput" type="search" placeholder="Enter movie or TV show name..." />
      <button id="searchBtn">Search</button>
    </div>
    <div id="result" class="result">Enter a title above and click Search.</div>

    <div id="tvControls" class="tv-controls row">
      <select id="seasonInput">
        <option value="1">Season 1</option>
        <option value="2">Season 2</option>
        <option value="3">Season 3</option>
        <option value="4">Season 4</option>
        <option value="5">Season 5</option>
      </select>
      <select id="episodeInput">
        <option value="1">Episode 1</option>
        <option value="2">Episode 2</option>
        <option value="3">Episode 3</option>
        <option value="4">Episode 4</option>
        <option value="5">Episode 5</option>
      </select>
      <button id="playTvBtn">Play Episode</button>
    </div>

    <iframe id="vidoraFrame" allowfullscreen allow="autoplay; fullscreen; picture-in-picture"></iframe>
  </div>

  <script>
    const searchInput = document.getElementById('searchInput');
    const searchBtn = document.getElementById('searchBtn');
    const resultDiv = document.getElementById('result');
    const frame = document.getElementById('vidoraFrame');
    const tvControls = document.getElementById('tvControls');
    const seasonInput = document.getElementById('seasonInput');
    const episodeInput = document.getElementById('episodeInput');
    const playTvBtn = document.getElementById('playTvBtn');
    const OMDB_API_KEY = "c0891d04";

    let currentShow = null;

    async function lookupIMDb() {
      const query = searchInput.value.trim();
      if (!query) return alert("Please enter a movie or TV show name.");

      resultDiv.innerHTML = "üîç Searching...";
      frame.style.display = 'none';
      tvControls.style.display = 'none';

      try {
        const res = await fetch(`https://www.omdbapi.com/?t=${encodeURIComponent(query)}&apikey=${OMDB_API_KEY}`);
        const data = await res.json();

        if (data.Response === "False") {
          resultDiv.innerHTML = `<div class="error">‚ùå ${data.Error}</div>`;
          return;
        }

        const imdbId = data.imdbID;
        const title = data.Title;
        const year = data.Year;
        const type = data.Type;

        resultDiv.innerHTML = `
          <strong>üé¨ ${title}</strong> (${year})<br>
          Type: ${type}<br>
          IMDb ID: <code>${imdbId}</code><br>
          <a href="https://www.imdb.com/title/${imdbId}/" target="_blank">Open on IMDb</a>
        `;

        currentShow = { imdbId, type };

        if (type === "series") {
          tvControls.style.display = 'flex';
        } else {
          const vidoraUrl = `https://vidora.su/movie/${imdbId}?autoplay=true&colour=00ff9d&logo=https://vidora.su/logo.png`;
          frame.src = vidoraUrl;
          frame.style.display = 'block';
          frame.scrollIntoView({ behavior: 'smooth' });
        }

      } catch (err) {
        resultDiv.innerHTML = `<div class="error">Error: ${err.message}</div>`;
      }
    }

    function playEpisode() {
      if (!currentShow) return;
      const season = seasonInput.value;
      const episode = episodeInput.value;
      const { imdbId } = currentShow;

      const vidoraUrl = `https://vidora.su/tv/${imdbId}/${season}/${episode}?autoplay=true&colour=00ff9d&logo=https://vidora.su/logo.png`;
      frame.src = vidoraUrl;
      frame.style.display = 'block';
      frame.scrollIntoView({ behavior: 'smooth' });
    }

    searchBtn.addEventListener('click', lookupIMDb);
    searchInput.addEventListener('keydown', e => { if (e.key === 'Enter') lookupIMDb(); });
    playTvBtn.addEventListener('click', playEpisode);
  </script>
</body>
</html>
