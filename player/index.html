<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>TMDB ‚Üí Vidora Player</title>
<style>
:root{--bg:#0f1115;--panel:#181b22;--text:#e5e7eb;--accent:#00ff9d;--border:#272b33}
body{font-family:Inter,Arial,sans-serif;background:var(--bg);color:var(--text);margin:0;padding:20px}
h1{text-align:center;margin-bottom:20px;color:var(--accent)}
.box{max-width:700px;margin:0 auto;background:var(--panel);border-radius:12px;padding:20px;border:1px solid var(--border)}
.row{display:flex;gap:10px;margin-bottom:10px}
input,select,button{padding:10px;border-radius:8px;border:1px solid var(--border);background:#11141a;color:var(--text);font-size:16px}
input::placeholder{color:#777}
select{cursor:pointer}
button{background:var(--accent);color:#000;border:none;cursor:pointer;font-weight:600;transition:opacity .2s ease}
button:hover{opacity:.85}
iframe{width:100%;height:600px;border:none;border-radius:10px;margin-top:20px;display:none}
.result{margin-top:10px;background:#11141a;border-radius:10px;padding:12px;border:1px solid var(--border)}
.error{color:#ff5555}
a{color:var(--accent);text-decoration:none}
.tv-controls{display:none;margin-top:10px;gap:10px;align-items:center}
</style>
</head>
<body>
<h1>TMDB ‚Üí Vidora Player</h1>
<div class="box">
<div class="row">
<input id="titleInput" type="text" placeholder="Enter movie or TV show name...">
<button id="lookupBtn">Lookup</button>
</div>
<div id="result" class="result">Enter a title above and click Lookup.</div>
<div class="tv-controls row" id="tvControls">
<select id="seasonInput"><option value="1">Season 1</option><option value="2">Season 2</option><option value="3">Season 3</option></select>
<select id="episodeInput"><option value="1">Episode 1</option><option value="2">Episode 2</option><option value="3">Episode 3</option></select>
<button id="playTvBtn">Play Episode</button>
</div>
<iframe id="vidoraFrame" allowfullscreen allow="autoplay; fullscreen; picture-in-picture"></iframe>
</div>
<script>
const titleInput=document.getElementById("titleInput")
const lookupBtn=document.getElementById("lookupBtn")
const resultDiv=document.getElementById("result")
const tvControls=document.getElementById("tvControls")
const seasonInput=document.getElementById("seasonInput")
const episodeInput=document.getElementById("episodeInput")
const playTvBtn=document.getElementById("playTvBtn")
const frame=document.getElementById("vidoraFrame")
let currentShow=null

async function lookupTMDB(){
  const query=titleInput.value.trim()
  if(!query) return alert("Enter a movie or TV show name.")
  resultDiv.innerHTML="üîç Searching..."
  frame.style.display="none"
  tvControls.style.display="none"
  try{
    const res=await fetch(`https://corsproxy.io/?https://www.themoviedb.org/search?query=${encodeURIComponent(query)}`)
    const text=await res.text()
    const div=document.createElement('div')
    div.innerHTML=text
    const movieLink=div.querySelector('a[href^="/movie/"], a[href^="/tv/"]')
    if(!movieLink){resultDiv.innerHTML=`<div class="error">‚ùå No results found</div>`;return}
    const href=movieLink.getAttribute('href')
    const isMovie=href.startsWith("/movie/")
    const tmdbId=href.split("/")[2]
    const name=movieLink.querySelector(".title")?.innerText || query
    resultDiv.innerHTML=`<strong>üé¨ ${name}</strong><br>Type: ${isMovie?"Movie":"TV"}<br>TMDB ID: <code>${tmdbId}</code>`
    currentShow={tmdbId,type:isMovie?"movie":"tv"}
    if(!isMovie){tvControls.style.display="flex"}else{
      const url=`https://vidora.su/movie/${tmdbId}?autoplay=true&colour=00ff9d&logo=https://vidora.su/logo.png`
      frame.src=url
      frame.style.display="block"
      frame.scrollIntoView({behavior:"smooth"})
    }
  }catch(err){resultDiv.innerHTML=`<div class="error">Error: ${err.message}</div>`}
}

function playEpisode(){
  if(!currentShow)return
  const season=seasonInput.value
  const episode=episodeInput.value
  const {tmdbId}=currentShow
  const url=`https://vidora.su/tv/${tmdbId}/${season}/${episode}?autoplay=true&colour=00ff9d&logo=https://vidora.su/logo.png`
  frame.src=url
  frame.style.display="block"
  frame.scrollIntoView({behavior:"smooth"})
}

lookupBtn.addEventListener("click",lookupTMDB)
titleInput.addEventListener("keydown",e=>{if(e.key==="Enter")lookupTMDB()})
playTvBtn.addEventListener("click",playEpisode)
</script>
</body>
</html>
